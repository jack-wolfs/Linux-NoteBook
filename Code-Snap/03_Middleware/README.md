# 中间件设计

## 功能

+ 接收消息的通讯线程 （3种: 上行，下行，同级）
	+ 单独接收线程
		+ 尽量不要有处理逻辑，防止消息堵死，无法接收到
	+ 消息进入队列（可以只有一个队列也可以有多个队列）

+ 消息队列处理线程 (如果只有一个队列，可以在主线程中做)
	+ 从队列取消息，派发到工作线程中

+ 工作线程
	+ 状态机
	+ 计时器(TimeOut消息进入队列)
	+ 发送消息

+ 心跳线程

